(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{632:function(t,a,s){"use strict";s.r(a);var e=s(23),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"trans-ast"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trans-ast"}},[t._v("#")]),t._v(" trans-ast")]),t._v(" "),s("h2",{attrs:{id:"é‡åˆ°çš„é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é‡åˆ°çš„é—®é¢˜"}},[t._v("#")]),t._v(" é‡åˆ°çš„é—®é¢˜")]),t._v(" "),s("p",[t._v("åœ¨ä¸­åŒ»é¡¹ç›®ä½¿ç”¨htmlä½œä¸ºæ¨¡æ¿ä¿å­˜ç—…ä¾‹,å‰ç«¯éœ€è¦è§£æå¤§é‡htmlå­—ç¬¦ä¸²,è¿›è¡Œè‡ªå®šä¹‰å±æ€§,æ ·å¼,ç±»å‹ç­‰æ“ä½œ,åŸç”Ÿdomæ“ä½œé€ æˆè½½å…¥æ¨¡æ¿è€—æ—¶è¿‡é•¿çš„é—®é¢˜")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/mbtree.png",alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"éœ€è¦è§£æåšçš„äº‹æƒ…"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#éœ€è¦è§£æåšçš„äº‹æƒ…"}},[t._v("#")]),t._v(" éœ€è¦è§£æåšçš„äº‹æƒ…")]),t._v(" "),s("ol",[s("li",[t._v("è§£æhtmlå­—ç¬¦ä¸²,æ‹¿åˆ°æ‰€æœ‰å…ƒç´ çš„sidå’Œid,è¯·æ±‚æ¥å£å¾—åˆ°å¯¹åº”å…ƒç´ çš„å†…å®¹")]),t._v(" "),s("li",[t._v("æ ¹æ®æ¥å£è¿”å›å‚æ•°è®¾ç½®å¯¹åº”çš„å…ƒç´ çš„ç±»å‹:"),s("s",[t._v("date")]),t._v(","),s("s",[t._v("datetime")]),t._v(",text,select,checkbox,radio")]),t._v(" "),s("li",[t._v("å¦‚ç±»å‹ä¸æ˜¯text,åˆ™è§£æå¾…é€‰é¡¹list,è®¾ç½®ç»™å¯¹åº”å…ƒç´ ")])]),t._v(" "),s("div",[t._v("\n    å¦‚å›¾ç¤ºä¾‹:\n    "),s("img",{staticStyle:{"text-algin":"center"},attrs:{src:"/img/event.png",height:"750",width:"1030"}})]),t._v(" "),s("h2",{attrs:{id:"è§£æhtmlå­—ç¬¦ä¸²çš„æ–¹å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è§£æhtmlå­—ç¬¦ä¸²çš„æ–¹å¼"}},[t._v("#")]),t._v(" è§£æhtmlå­—ç¬¦ä¸²çš„æ–¹å¼")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("createDocumentFragment()\nè½¬æ¢ä¸ºæ–‡æ¡£ç‰‡æ®µ,è¿›è¡Œdomæ“ä½œ,è§£æåè¿”å›")])]),t._v(" "),s("li",[s("p",[t._v("createElement()\nè½¬æ¢ä¸ºçœŸå®domæ“ä½œ")])])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("renderHtml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("vue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fragment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createDocumentFragment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parentElement "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  parentElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" renderHtml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// todo..")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("div",[t._v("\nğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»è§£æåçš„æ•°æ®,åŸç”ŸDOM\n    "),s("img",{staticStyle:{"text-algin":"center"},attrs:{src:"/img/111.png",height:"",width:"800"}})]),t._v(" "),s("h2",{attrs:{id:"ç¼ºç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼ºç‚¹"}},[t._v("#")]),t._v(" ç¼ºç‚¹")]),t._v(" "),s("ol",[s("li",[t._v("ä¸æ–¹ä¾¿æ“ä½œè‡ªå®šä¹‰å±æ€§å’Œå†…å®¹,å±‚çº§æ··ä¹±,è·å–ä¸è®¾ç½®éº»çƒ¦")]),t._v(" "),s("li",[t._v("æ“ä½œåŸç”Ÿdomä¸ç¬¦åˆmvvmæ¡†æ¶æ€æƒ³,ä»£ç æµç¨‹é•¿ä¸”å¤æ‚")]),t._v(" "),s("li",[t._v("æ•ˆç‡è¾ƒä½"),s("br"),t._v(" "),s("img",{attrs:{src:"/img/context.png",alt:"img"}}),t._v(" "),s("img",{attrs:{src:"/img/dm1.png",alt:"img"}}),t._v(" "),s("img",{attrs:{src:"/img/dm2.png",alt:"img"}})])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("domæ“ä½œèƒƒç‚æ¨¡æ¿,éšè¯Šæ¨¡æ¿,å¤è¯Šæ¨¡æ¿çš„åˆå§‹è€—æ—¶")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/old.png",alt:"img"}})])]),t._v(" "),s("h2",{attrs:{id:"è§£å†³æ€è·¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ€è·¯"}},[t._v("#")]),t._v(" è§£å†³æ€è·¯")]),t._v(" "),s("blockquote",[s("p",[t._v("å‚è€ƒè™šæ‹Ÿdom,ç”¨jså¯¹è±¡æ–¹å¼æ¨¡æ‹ŸdomèŠ‚ç‚¹,è¿›è¡Œå±æ€§æ“ä½œã€‚")])]),t._v(" "),s("p",[t._v("æ‰‹åŠ¨æ„å»ºASTæŠ½è±¡è¯­æ³•æ ‘,é‡‡ç”¨å››åˆ™è¿ç®—æ‹¬å·åŒ¹é…çš„ç›¸åŒæœºåˆ¶,å¯¹æ¨¡æ¿è¿›è¡Œæ­£åˆ™è§£æ,æ‰‹åŠ¨æ„å»ºå¯¹è±¡,å…·ä½“æµç¨‹å¯åœ¨æˆ‘å†™çš„"),s("code",[t._v("mini-vue")]),t._v("ä¸­æŸ¥çœ‹"),s("br"),t._v(" "),s("img",{attrs:{src:"/img/ast11.png",alt:"img"}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("astæ“ä½œæ“ä½œèƒƒç‚æ¨¡æ¿,éšè¯Šæ¨¡æ¿,å¤è¯Šæ¨¡æ¿çš„åˆå§‹è€—æ—¶")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/new.png",alt:"img"}})])]),t._v(" "),s("h2",{attrs:{id:"è§£å†³æ–¹æ³•æç‚¼æˆæ’ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹æ³•æç‚¼æˆæ’ä»¶"}},[t._v("#")]),t._v(" è§£å†³æ–¹æ³•æç‚¼æˆæ’ä»¶")]),t._v(" "),s("p",[t._v("å°†è§£å†³æ–¹æ³•æç‚¼æˆä¸€ä¸ªé€šç”¨æ’ä»¶,é‡åˆ°éœ€è¦è§£æhtmlçš„æ“ä½œ,éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨,ä¼˜åŒ–æ•ˆç‡")]),t._v(" "),s("p",[t._v("å¯ä»¥å°†htmlå­—ç¬¦ä¸²è§£æä¸ºASTå¯¹è±¡çš„ä¸€ä¸ªæ’ä»¶,æä¾›Templateè½¬AST,ASTè½¬DOMçš„åŠŸèƒ½,è§£æå¤§é‡HTMLå­—ç¬¦ä¸²çš„æ•ˆç‡ç›¸æ¯”ä¼ ç»ŸDOMæ“ä½œæå‡25å€ä»¥ä¸Š")]),t._v(" "),s("h2",{attrs:{id:"å®‰è£…"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…"}},[t._v("#")]),t._v(" å®‰è£…")]),t._v(" "),s("p",[s("code",[t._v("npm install --save trans-ast")]),s("br"),t._v("\nor"),s("br"),t._v(" "),s("code",[t._v("yarn add trans-ast")])]),t._v(" "),s("h2",{attrs:{id:"ä½¿ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨"}},[t._v("#")]),t._v(" ä½¿ç”¨")]),t._v(" "),s("p",[t._v("Nodeç¯å¢ƒ"),s("br"),t._v(" "),s("code",[t._v('const $AST = require("trans-ast")')])]),t._v(" "),s("p",[t._v("Vue æˆ– React"),s("br"),t._v(" "),s("code",[t._v("import $AST from 'trans-ast'")])]),t._v(" "),s("h2",{attrs:{id:"æä¾›æ–¹æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æä¾›æ–¹æ³•"}},[t._v("#")]),t._v(" æä¾›æ–¹æ³•")]),t._v(" "),s("h3",{attrs:{id:"parseast-template"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parseast-template"}},[t._v("#")]),t._v(" parseAST(template)")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("å‚æ•°")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("æè¿°")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("template (å¿…é¡»)")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Stringç±»å‹,åˆæ³•çš„htmlå­—ç¬¦ä¸²")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("è¿”å›å€¼")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æè¿°")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("AST")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Objectç±»å‹,è§£æåçš„ASTå¯¹è±¡")])])])]),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"parsedom-ast"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parsedom-ast"}},[t._v("#")]),t._v(" parseDOM(AST)")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("å‚æ•°")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("æè¿°")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("AST (å¿…é¡»)")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Objectç±»å‹,ç”±parseASTæ–¹æ³•è§£æåçš„ASTå¯¹è±¡")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("è¿”å›å€¼")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æè¿°")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("ElementNode")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("NodeèŠ‚ç‚¹,ASTè½¬æ¢åçš„DOM")])])])]),t._v(" "),s("br"),t._v(" "),s("h2",{attrs:{id:"astå±æ€§è¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#astå±æ€§è¯´æ˜"}},[t._v("#")]),t._v(" ASTå±æ€§è¯´æ˜")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("å±æ€§")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("æè¿°")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("attrsMap")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Mapç±»å‹çš„æ ‡ç­¾å±æ€§,åŒ…å«è‡ªå®šä¹‰å±æ€§")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("attrslist")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Listç±»å‹çš„æ ‡ç­¾å±æ€§,åŒ…å«è‡ªå®šä¹‰å±æ€§")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("children")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å½“å‰å…ƒç´ çš„å­å…ƒç´ ")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("parent")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å½“å‰å…ƒç´ çš„çˆ¶å…ƒç´  (å·²åºŸå¼ƒ)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("tag")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æ ‡ç­¾åç§°")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("type")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1:å…ƒç´  2:æ–‡æœ¬")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("expression")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å¯æ‰§è¡Œå­—ç¬¦ä¸²,åç»­ç‰ˆæœ¬ä¼šæ”¯æŒç›´æ¥è§£æ")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("text")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æ–‡æœ¬å†…å®¹")])])])]),t._v(" "),s("h2",{attrs:{id:"vueä¸­å…¨å±€æ³¨å†Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vueä¸­å…¨å±€æ³¨å†Œ"}},[t._v("#")]),t._v(" vueä¸­å…¨å±€æ³¨å†Œ")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼•å…¥")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'trans-ast'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨å†Œ")]),t._v("\nvue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AST")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨")]),t._v("\nvm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseAST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nvm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseDOM")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);