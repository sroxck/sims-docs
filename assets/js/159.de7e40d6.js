(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{594:function(s,t,n){"use strict";n.r(t);var a=n(23),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"nest框架的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nest框架的使用"}},[s._v("#")]),s._v(" nest框架的使用")]),s._v(" "),n("p",[s._v("nest是基于express开发的框架,使用mvc思想")]),s._v(" "),n("h2",{attrs:{id:"快速上手"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#快速上手"}},[s._v("#")]),s._v(" 快速上手")]),s._v(" "),n("p",[s._v("安装nest\n"),n("code",[s._v("npm i -g @nestjs/cli")])]),s._v(" "),n("p",[s._v("创建项目\n"),n("code",[s._v("nest new 项目名称")])]),s._v(" "),n("p",[s._v("项目分为模块(module),控制器(Controller)")]),s._v(" "),n("p",[s._v("生成模块\n"),n("code",[s._v("nest g(生成) mo 模块名")])]),s._v(" "),n("p",[s._v("生成控制器\n"),n("code",[s._v("nest g co 控制器名")])]),s._v(" "),n("blockquote",[n("p",[s._v("可以用-h查看支持")])]),s._v(" "),n("p",[s._v("nest接入swagger生成api文档")]),s._v(" "),n("p",[s._v("安装swagger\n"),n("code",[s._v("npm i --save @nestjs/swagger swagger-ui-express")])]),s._v(" "),n("p",[s._v("使用")]),s._v(" "),n("div",{staticClass:"language-ts line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//main.ts")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" SwaggerModule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" DocumentBuilder "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@nestjs/swagger'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DocumentBuilder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTitle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'微前端服务API'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setDescription")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'微前端演示服务'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setVersion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1.0'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" document "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" SwaggerModule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createDocument")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// api-docs: 文档地址")]),s._v("\n  SwaggerModule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'api-docs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("swagger 装饰器")]),s._v(" "),n("p",[n("code",[s._v("ApiTags")]),s._v(" 装饰当前控制器(路由)的名称\n"),n("code",[s._v("ApiOperation")]),s._v(" 装饰当前接口的名称")]),s._v(" "),n("p",[s._v("nest 接口取参数\n@Body() body, @Query() query,@Param() param\n获取全部不用传参 获取指定 就传参")]),s._v(" "),n("p",[s._v("数据库 mongdb nest模型  "),n("code",[s._v("typegoose")])]),s._v(" "),n("p",[s._v("安装\n"),n("code",[s._v("yarn add @hasezoey/typegoose@")]),s._v(" "),n("code",[s._v("next mongoose @types/mongoose")])]),s._v(" "),n("p",[n("code",[s._v("yarn add @hasezoey/typegoose@next mongoose @types/mongoose")])]),s._v(" "),n("p",[s._v("开启验证\n安装 "),n("code",[s._v("yarn add class-validator class-trans")]),s._v("\nformer")]),s._v(" "),n("p",[s._v("使用 // 开启验证管道\n"),n("code",[s._v("app.useGlobalPipes(new ValidationPipe())")])]),s._v(" "),n("p",[s._v("// 使用依赖注入替换typegoose\n"),n("code",[s._v("constructor(@InjectModel(Posts) private readonly postModel:ModelType<Posts>){}")])])])}),[],!1,null,null,null);t.default=e.exports}}]);